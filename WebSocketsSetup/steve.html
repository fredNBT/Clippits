<html>
   <head>
      <title>JavaScript MQTT WebSocket Example</title>
	  <script src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.1/mqttws31.js" type="text/javascript">
	 </script>
	 <script type = "text/javascript" language = "javascript">
		// Create a client instance: Broker, Port, Websocket Path, Client ID
client = new Paho.MQTT.Client("13.51.165.225", Number(9001), "/ws", "10");

// set callback handlers
client.onConnectionLost = function (responseObject) {
    console.log("Connection Lost: "+responseObject.errorMessage);
}

client.onMessageArrived = function (message) {
  console.log("Message Arrived: "+message.payloadString);
}

// Called when the connection is made
function onConnect(){
	console.log("Connected!");
	var message = new Paho.MQTT.Message("Message Payload");
    message.destinationName = "steve";
    message.qos = 0;

client.send(message);
client.subscribe("steve");
}

function PostMessage(){
	var message = new Paho.MQTT.Message(document.getElementById('textbox').value);
    message.destinationName = "steve";
    message.qos = 0;

client.send(message);
}

console.log("connecting!");
// Connect the client, providing an onConnect callback
client.connect({
	onSuccess: onConnect
});
client.onMessageArrived = function (message) {
  console.log("Message Arrived: " + message.payloadString);
}

</script>
   </head>
     <body>
        <input type="text" id="textbox" name="textbox">

		<button id="publish" onclick="PostMessage()">Hello Websockets</button>
	 </body>
	 </html>